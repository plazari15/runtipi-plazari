{
  "services": [
    {
      "name": "jupyter",
      "image": "${JUPYTER_IMAGE}",
      "isMain": true,
      "internalPort": 8888,
      "environment": {
        "JUPYTER_ENABLE_LAB": "${JUPYTER_INTERFACE}",
        "JUPYTER_TOKEN": "${JUPYTER_TOKEN}",
        "GRANT_SUDO": "yes",
        "CHOWN_HOME": "yes",
        "CHOWN_HOME_OPTS": "-R",
        "LANG": "${JUPYTER_LANG}.UTF-8",
        "LC_ALL": "${JUPYTER_LANG}.UTF-8"
      },
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/work",
          "containerPath": "/home/jovyan/work"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/notebooks",
          "containerPath": "/home/jovyan/notebooks"
        }
      ],
      "user": "root",
      "command": [
        "bash", "-c",
        "apt-get update && apt-get install -y locales && locale-gen ${JUPYTER_LANG}.UTF-8 && pip install jupyterlab-language-pack-pt-BR jupyterlab-language-pack-es-ES jupyterlab-language-pack-fr-FR jupyterlab-language-pack-de-DE jupyterlab-language-pack-zh-CN jupyterlab-language-pack-ja-JP jupyterlab-language-pack-ko-KR jupyterlab-language-pack-ru-RU jupyterlab-language-pack-it-IT 2>/dev/null || true && if [ \"${JUPYTER_AUTH_MODE}\" = \"none\" ]; then start-notebook.sh --NotebookApp.token='' --NotebookApp.password='' --NotebookApp.allow_root=True; else start-notebook.sh --NotebookApp.token='${JUPYTER_TOKEN}' --NotebookApp.password='' --NotebookApp.allow_root=True; fi"
      ]
    }
  ],
  "$schema": "../dynamic-compose-schema.json"
}
